# å·¥ç¨‹åŒ–å¼€å‘åŸºæœ¬æµç¨‹



## `vite`å®‰è£…ä¸ä½¿ç”¨

å®‰è£…`vite`

`vite`ä¾èµ–çš„`node`ç‰ˆæœ¬ `>=` 12.0.0

æ‰“å¼€ç»ˆç«¯ï¼ŒæŸ¥çœ‹`npm`ç‰ˆæœ¬ï¼š`npm -v`

`npm`ç‰ˆæœ¬åœ¨`6.x`åŠä»¥ä¸‹ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤

- `aribnb-ssr`è¡¨ç¤ºé¡¹ç›®åç§°

- `template`è¡¨ç¤ºé¢„è®¾æ¨¡æ¿ï¼ˆæŠ€æœ¯æ ˆï¼‰

```bash
npm init vite@latest airbnb-ssr --template vue-ts
```

`npm`ç‰ˆæœ¬åœ¨`7`åŠ`7+`ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤

```bash
npm init vite@latest airbnb-ssr -- --template vue-ts
```

åˆ‡æ¢åˆ°æ–‡ä»¶å¤¹ä¸‹ï¼Œå®‰è£…ä¾èµ–

```bash
cd airbnb-ssr
npm i -D
```

### `vite`æ„å»ºåŸºæœ¬é…ç½®

ç”±äºæ˜¯åœ¨`linux`ç¯å¢ƒä¸‹ï¼Œè¿è¡Œå¯åŠ¨å‘½ä»¤å‰ï¼Œæ”¹ä¸‹`package.json`çš„é…ç½®

```json
    "dev": "vite --host 0.0.0.0 --port 8081", // æŒ‡å®šipå’Œå¼€æ”¾çš„ç«¯å£å·
```

`vite`å’Œ`webapck`çš„ä¸åŒï¼š

- æ²¡æœ‰`vendor`æ–‡ä»¶ï¼Œåˆ©ç”¨çš„æ˜¯æµè§ˆå™¨åŸç”Ÿçš„`esModule`



### é…ç½®`@`åˆ«å

`vite.config.ts`

```tsx
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'
// https://vitejs.dev/config/
export default defineConfig({
  plugins: [vue()],
  resolve: {
    // é…ç½®è·¯å¾„åˆ«å
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})

```

`tsconfig.json`

```json
{
  "compilerOptions": {
      
    "baseUrl": ".",
    "paths": {
      "@/*": [
        "src/*"
      ]
    }
      
  },
```

### ç›®å½•ç»“æ„è§£æ

ç›¸æ¯”è¾ƒäºå¸¸è§„`vue2`ç›®å½•ï¼Œ`index.html`æŠ½ç¦»å‡ºæ¥äº†ï¼Œ`<scipt>`æ ‡ç­¾ä¸Šå¤šäº†`type="module"`å±æ€§ï¼Œä½¿ç”¨äº†`main.ts`ä½œä¸ºé¡¹ç›®çš„å…¥å£æ–‡ä»¶

## å®‰è£…`less-loader`

- æ­¤æ—¶è‡ªå·±ä¸‹è½½çš„`vue-cli`ï¼Œç”¨åˆ°`webpack`çš„ç‰ˆæœ¬ä¸º`5`ç‰ˆæœ¬ï¼ˆ`node_modules`æ–‡ä»¶å¤¹æ‰¾`webapck`æ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹`package.json`æ–‡ä»¶ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™è£…`less-loader`æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºé»˜è®¤å®‰è£…çš„æ˜¯æœ€æ–°ç‰ˆçš„`less-loader`ï¼Œæ–°ç‰ˆæœ¬æ˜¯ä¸ºäº†è¿åˆ`webpakc5`

- å¦‚æœ`vue-cli`ç”¨çš„`webpack`ä¸º`4`ç‰ˆæœ¬ï¼Œåˆ™è¦`less-loader`ç‰ˆæœ¬é™çº§ä»¥å…¼å®¹`webpack4`

  - æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬ï¼š`npm view less-loader versions`
  - è¯•ä¸€ä¸‹ä¸é‚£ä¹ˆæ–°çš„ç‰ˆæœ¬ï¼š`npm i less-loader@7.0.0 -D` 
    - `8`åŠä»¥ä¸Šçš„ç‰ˆæœ¬å°±æ˜¯ä¸º`webpack4`æœåŠ¡çš„äº†

- ä½¿ç”¨

  ```less
  <style lang="less" scoped>
  .outer {
      .inner {
          
      }
  }
  </style>
  ```

## å®‰è£…`vue-router`

### å®‰è£…

```bash
npm i vue-router@next -D
```

å®‰è£…çš„æ˜¯`4.0.13`ç‰ˆæœ¬

### å¼•å…¥

æ–°å»º`router`ç›®å½•ï¼Œå¹¶æ–°å»º`router.ts`

`router.ts`

```ts
import home from '@/views/home/index.vue';
import mine from '@/views/mine/index.vue';
import {createRouter, createMemoryHistory, createWebHistory, createWebHashHistory} from 'vue-router';
const routes = [
    {
        path: '/home',
        name: 'home',
        component: home,
        meta: {
            title: '',
            keepAlive: false
        }
    },
    {
        path: '/mine',
        name: 'mine',
        component: mine,
        meta: {
            title: '',
            keepAlive: false
        }
    }
]

const router = createRouter({
    history: createWebHistory(),
    routes
})

export default router
```

`main.ts`ä¸­ä½¿ç”¨`vue-router`æ’ä»¶

```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'

const app = createApp(App)
app.use(router)
app.mount('#app')

```

### ä½¿ç”¨

ç»„ä»¶ä¸­ä½¿ç”¨`router`

`App.vue`

```vue
<script setup lang="ts">
import {useRouter} from 'vue-router'
const router = useRouter()
</script>

<template>

  <button @click="() => router.push({path: '/home'})">é¦–é¡µ</button>
  <button @click="() => router.push({path: '/mine'})">ä¸ªäººä¸­å¿ƒ</button>
  <router-view/>
</template>

<style>

</style>

```

`@/views/home/index.vue`

```vue
<script setup lang="ts">
import {useRouter,useRoute} from 'vue-router'
const router = useRouter()
const route = useRoute()
console.log(route.params)
</script>

<template>
  é¦–é¡µ
  <button @click="() => router.push({path: '/mine', query: {id: 1}})">è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ</button>

</template>

<style>

</style>

```

`@/views/mine/index.vue`

```vue
<script setup lang="ts">
import {useRouter, useRoute} from 'vue-router'
const router = useRouter()
const route = useRoute()

console.log(route.query)
</script>

<template>
  ä¸ªäººä¸­å¿ƒ
  <button @click="() => router.push({name: 'home', params: {id: 2}})">å›åˆ°é¦–é¡µ</button>

</template>

<style>

</style>

```

## å®‰è£…`element-ui`

### å®‰è£…

å®˜ç½‘ï¼šhttps://element.eleme.io/#/zh-CN/component/installation

```bash
npm i element-ui -D
```

å½“å‰é¡¹ç›®æ˜¯åŸºäº`vue-cli5`å®‰è£…çš„`vue2`çš„é¡¹ç›®ï¼Œæç¤º`core-js`ç‰ˆæœ¬è¿‡ä½

```
npm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.

```

ä½†å®é™…ä¸Š`package.json`ä¸­çš„`core-js`ç‰ˆæœ¬æ˜¯`3.8.3`ï¼Œå¯èƒ½æ˜¯`element-ui`ä¸­ç”¨åˆ°çš„ç‰ˆæœ¬å§ï¼Œæš‚æ—¶è·³è¿‡è¿™ä¸€é—®é¢˜

### å¼•å…¥

#### å…¨é‡å¼•å…¥ï¼ˆä¸æ¨èï¼‰

`main.js`

```js
import Vue from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'

import ElementUI from 'element-ui'; // å¼•å…¥elementç»„ä»¶åº“
import 'element-ui/lib/theme-chalk/index.css'; // å¼•å…¥elementå…¨éƒ¨æ ·å¼

Vue.config.productionTip = false

Vue.use(ElementUI); // åº”ç”¨element

new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')

```

#### æŒ‰éœ€å¼•å…¥

å€ŸåŠ© `babel-plugin-component`ï¼Œæˆ‘ä»¬å¯ä»¥åªå¼•å…¥éœ€è¦çš„ç»„ä»¶ï¼Œä»¥è¾¾åˆ°å‡å°é¡¹ç›®ä½“ç§¯çš„ç›®çš„ã€‚

`main.js`

```bash
npm install babel-plugin-component -D
```

ç„¶åï¼Œå°† `.babelrc` ä¿®æ”¹ä¸ºï¼š

```js
{
  "presets": [["es2015", { "modules": false }]],
  "plugins": [
    [
      "component",
      {
        "libraryName": "element-ui",
        "styleLibraryName": "theme-chalk"
      }
    ]
  ]
}
```

å¦‚æœæ²¡æœ‰`.babelrc`ï¼Œåº”è¯¥æœ‰`babel.config.js`

åŸæ¥çš„å†…å®¹

```js
module.exports = {
  presets: [
    '@vue/cli-plugin-babel/preset'
  ]
}
```

ä¿®æ”¹å¦‚ä¸‹ï¼š

```js
module.exports = {
  presets: [
    '@vue/cli-plugin-babel/preset',
    ["es2015", { "modules": false }]
  ],
  plugins: [ // è¿™é‡Œæ˜¯jsæ–‡ä»¶ï¼Œå»æ‰keyçš„å¼•å·
    [
      "component",
      {
        "libraryName": "element-ui",
        "styleLibraryName": "theme-chalk"
      }
    ]
  ]
}

```

### ä½¿ç”¨

#### å…¨é‡å¼•å…¥ä½¿ç”¨

ç›´æ¥ä½¿ç”¨

çœ‹æ–‡æ¡£ä¸Šå“ªä¸ªé€‚åˆç”¨çš„ï¼Œå¤åˆ¶ç„¶åæ”¹å§æ”¹å§

```vue
<el-row>
  <el-button>é»˜è®¤æŒ‰é’®</el-button>
  <el-button type="primary">ä¸»è¦æŒ‰é’®</el-button>
  <el-button type="success">æˆåŠŸæŒ‰é’®</el-button>
  <el-button type="info">ä¿¡æ¯æŒ‰é’®</el-button>
  <el-button type="warning">è­¦å‘ŠæŒ‰é’®</el-button>
  <el-button type="danger">å±é™©æŒ‰é’®</el-button>
</el-row>
```

#### æŒ‰éœ€å¼•å…¥ä½¿ç”¨

æ¥ä¸‹æ¥ï¼Œå¦‚æœä½ åªå¸Œæœ›å¼•å…¥éƒ¨åˆ†ç»„ä»¶ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ `main.js` ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```js
import Vue from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'


import { Button, Row } from 'element-ui'; // æ³¨æ„å¼•å…¥çš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰`el`çš„ï¼Œç„¶åç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™

Vue.config.productionTip = false

Vue.component(Button.name, Button);  // ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯è‡ªå®šä¹‰çš„ä¸€ä¸ªåç§°
Vue.component(Row.name, Row);
// é‚£ä¹ˆæ ·å¼æ€ä¹ˆæŠŠæ§å‘¢ï¼Ÿ
// elementä¼šæ ¹æ®å¼•å…¥çš„ç»„ä»¶åº“ï¼Œè‡ªå·±åˆ†æä¾èµ–çš„æ ·å¼
// Vue.use(Button)

new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')

```

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç»„ä»¶åº“çš„é…ç½®å’Œè„šæ‰‹æ¶çš„é…ç½®è¦åˆå¹¶èµ·æ¥çš„ï¼Œå¦‚æœè„šæ‰‹æ¶æ›´æ–°äº†ï¼Œä½†ç»„ä»¶åº“çš„é…ç½®å†™æ³•æ²¡æ›´æ–°ï¼Œå°±ä¼šæœ‰é—®é¢˜

å¾ˆæ˜æ˜¾çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ï¼Œ`.babelrc`æ–‡ä»¶éƒ½æ¢æˆäº†`babel.config.js`

å¦‚ä¸Šå†™æ³•ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š

![image-20220606155724194](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220606155724194.png)

æŒ‰ç…§æç¤ºï¼Œå®‰è£…ä¸‹å¯¹åº”çš„åŒ…

```bash
npm i babel-preset-es2015 -D
```

è™½ç„¶å®‰è£…æˆåŠŸäº†ï¼Œä½†äººå®¶`babel-preset-es2015`æ›´æ–°æ”¹åäº†

```bash
[root@VM-4-12-centos test2]# npm i babel-preset-es2015 -D
npm WARN deprecated babel-preset-es2015@6.24.1: ğŸ™Œ  Thanks for using Babel: we recommend using babel-preset-env now: please read https://babeljs.io/env to update!

```

å†é‡æ–°å¯åŠ¨ä¸‹é¡¹ç›®ï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯

![image-20220606160147715](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220606160147715.png)

ç”±äºäººå®¶`es2015`æ”¹åäº†ï¼Œæ‰€ä»¥é…ç½®æ–‡ä»¶å¾—ä¿®æ”¹ï¼š

```js
module.exports = {
  presets: [
    '@vue/cli-plugin-babel/preset',
    ["@babel/preset-env", { "modules": false }] // æ›´æ­£ä¸€ä¸‹åŒ…å
  ],
  plugins: [
    [
      "component",
      {
        "libraryName": "element-ui",
        "styleLibraryName": "theme-chalk"
      }
    ]
  ]
}

```

é€ æˆè¿™äº›é—®é¢˜çš„åŸå› åœ¨äºï¼Œ`element`æ²¡æœ‰åŠæ—¶æ›´æ–°

å¦‚æœä¸è¯´æ€ä¹ˆæ”¹ï¼Œè¦çœŸæƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ç ”ç©¶ä¸‹`babel-plugin-component`æ–‡æ¡£ï¼Œçœ‹çœ‹ç›®å‰é’ˆå¯¹æœ€æ–°çš„è„šæ‰‹æ¶ï¼Œå®ƒçš„é…ç½®æ˜¯æ€ä¹ˆæ ·çš„

æŒ‰éœ€å¼•å…¥åçš„èµ„æºå¤§å°

![image-20220606160818450](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220606160818450.png)

## å®‰è£…`element-plus`

### å®‰è£…

```bash
npm i element-plus -D
```

### å¼•å…¥

æŒ‰éœ€å¼•å…¥

å…ˆä¸‹è½½ä¾èµ–ï¼Œå®ç°è‡ªåŠ¨å¯¼å…¥

```bash
npm i -D unplugin-vue-components unplugin-auto-import
```

åœ¨`vite.config.ts`ä¸­æ–°å¢é…ç½®

```ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'
// æ–°å¢
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import {ElementPlusResolver} from 'unplugin-vue-components/resolvers'

export default defineConfig({
  plugins: [
      vue(),
      // æ–°å¢
      AutoImport({
        resolvers: [ElementPlusResolver()]
      }),
      Components({
        resolvers: [ElementPlusResolver()]
      })
  ],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})

```

åœ¨å…¥å£æ–‡ä»¶ä¸­å¯¼å…¥ï¼Œå¹¶æŒ‚è½½

```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

const app = createApp(App)
app.use(router)
app.use(ElementPlus)
app.mount('#app')

```

### ä½¿ç”¨

`home/index.vue`

```vue
<script setup lang="ts">
import {useRouter,useRoute} from 'vue-router'
const router = useRouter()
const route = useRoute()
console.log(route.params)
</script>

<template>
  é¦–é¡µ
  <button @click="() => router.push({path: '/mine', query: {id: 1}})">è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ</button>
  <el-button type="primary">Primary</el-button>
</template>

<style>

</style>

```

å¯ä»¥çœ‹åˆ°ï¼Œåå°åªå¼•å…¥äº†`button`ç›¸å…³çš„æ ·å¼

![image-20220602164011819](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220602164011819.png)

å‰å°ï¼š

- `eleme-plus`æ˜¯ä¸»åŒ…
- `base.css`æ˜¯åŸºæœ¬æ ·å¼æ–‡ä»¶
- `el-button`æ˜¯æŒ‰é’®ç›¸å…³æ ·å¼

![image-20220602164241609](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220602164241609.png)

å¯ä»¥çœ‹åˆ°ï¼Œ`UI`åº“å ç”¨çš„ä½“ç§¯å¾ˆå°ï¼Œè¿™ä¸ªå°±æ˜¯æŒ‰éœ€åŠ è½½çš„å¥½å¤„

æˆ‘ä»¬å†å¼•å…¥ä¸€ä¸‹æ¶ˆæ¯æç¤ºçš„ç»„ä»¶

```vue
<script setup lang="ts">
import {useRouter,useRoute} from 'vue-router'
import { h } from 'vue'
import { ElMessage } from 'element-plus'

const router = useRouter()
const route = useRoute()
console.log(route.params)

const openVn = () => {
  ElMessage({
    message: h('p', null, [
      h('span', null, 'Message can be '),
      h('i', { style: 'color: teal' }, 'VNode'),
    ]),
  })
}
</script>

<template>
  é¦–é¡µ
  <button @click="() => router.push({path: '/mine', query: {id: 1}})">è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ</button>
  <el-button type="primary">Primary</el-button>
  <el-button :plain="true" @click="openVn">VNode</el-button>
</template>

<style>

</style>

```

ç›¸æ¯”è¾ƒäº`button`ï¼Œæ¶ˆæ¯æç¤ºæ¡†çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å…¨å±€å¯èƒ½éƒ½ä¼šç”¨åˆ°ï¼Œå¯ä»¥åœ¨å…¨å±€å¼•å…¥

ä½¿ç”¨`vm`å®ä¾‹ä¸Šçš„`config.globalProperty.XXX = YYY`æ¥é…ç½®å…¨å±€å±æ€§

`main.ts`

```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import ElementPlus, {ElMessage} from 'element-plus'
import 'element-plus/dist/index.css'

const app = createApp(App)
app.config.globalProperties.$message = ElMessage// æ–°å¢
app.use(router)
app.use(ElementPlus)
app.mount('#app')

```

åœ¨ç»„ä»¶ä¸­ï¼Œä½¿ç”¨`vue`çš„ä¸Šä¸‹æ–‡æ¥ä½¿ç”¨`$message`

```vue
<script setup lang="ts">
import {useRouter,useRoute} from 'vue-router'
import { h, getCurrentInstance} from 'vue'

const router = useRouter()
const route = useRoute()
console.log(route.params)

const {proxy}:any = getCurrentInstance() // vue3ä¸­æ²¡æœ‰thisï¼Œè·å–ä¸Šä¸‹æ–‡
const openVn = () => {
  proxy.$message({
    message: h('p', null, [
      h('span', null, 'Message can be '),
      h('i', { style: 'color: teal' }, 'VNode'),
    ]),
  })
}
</script>

<template>
  é¦–é¡µ
  <button @click="() => router.push({path: '/mine', query: {id: 1}})">è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ</button>
  <el-button type="primary">Primary</el-button>
  <el-button :plain="true" @click="openVn">VNode</el-button>
</template>

<style>

</style>

```

### åæ§½

ä¸ºå•¥è¿˜ä¼šæœ‰ä¸ª`element-plus`çš„`chunk`æ–‡ä»¶ï¼Œ`2M`å¤šï¼ï¼

![image-20220602170713170](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220602170713170.png)



## å®‰è£…`eslint`

### å®‰è£…

```bash
npm i eslint -D
```

å®‰è£…å®Œä¹‹åï¼Œæ‰§è¡Œä¸€ä¸‹`eslint`

`npx eslint --init`æˆ–`npm init @eslint/config`

- å¤‡æ³¨ï¼š`npm5.2`ä¹‹åï¼Œå†…ç½®äº†`npx`åŒ…ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œäº†ï¼ˆæ‰¾è‡ªå·±çš„`node_modules`ï¼‰

```bash
[root@VM-4-12-centos airbnb-ssr]# npm init @eslint/config
Need to install the following packages:
  @eslint/create-config
Ok to proceed? (y) y
âœ” How would you like to use ESLint? Â· style
âœ” What type of modules does your project use? Â· esm
âœ” Which framework does your project use? Â· vue
âœ” Does your project use TypeScript? Â· No / Yes
âœ” Where does your code run? Â· browser, node
âœ” How would you like to define a style for your project? Â· guide
âœ” Which style guide do you want to follow? Â· standard
âœ” What format do you want your config file to be in? Â· JavaScript
Checking peerDependencies of eslint-config-standard@latest
The config that you've selected requires the following dependencies:

eslint-plugin-vue@latest @typescript-eslint/eslint-plugin@latest eslint-config-standard@latest eslint@^8.0.1 eslint-plugin-import@^2.25.2 eslint-plugin-n@^15.0.0 eslint-plugin-promise@^6.0.0 @typescript-eslint/parser@latest
âœ” Would you like to install them now? Â· No / Yes
âœ” Which package manager do you want to use? Â· npm
Installing eslint-plugin-vue@latest, @typescript-eslint/eslint-plugin@latest, eslint-config-standard@latest, eslint@^8.0.1, eslint-plugin-import@^2.25.2, eslint-plugin-n@^15.0.0, eslint-plugin-promise@^6.0.0, @typescript-eslint/parser@latest

added 96 packages, and audited 291 packages in 19s

82 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
Successfully created .eslintrc.js file in /root/hh_git/vue-project/airbnb-ssr

```

å®‰è£…å®Œæ¯•åï¼Œä¼šæ ¹æ®æˆ‘ä»¬çš„é€‰æ‹©ï¼Œç”Ÿæˆ`.eslintrc.js`é…ç½®æ–‡ä»¶

```js
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true
  },
  extends: [
    // 'plugin:vue/essential',
    // æˆ‘ä»¬çš„é¡¹ç›®æ˜¯åŸºäºvue3çš„ï¼Œæ”¹æˆvue3/essentialï¼Œå¯ä»¥çœ‹ä¸‹eslintå®˜ç½‘ï¼Œå…³äºvue3çš„é…ç½®æ¨è
    'plugin:vue3/essential',
    'standard' // ä½¿ç”¨å•å¼•å·
  ],
  parserOptions: {
    ecmaVersion: 'latest',
    parser: '@typescript-eslint/parser',
    sourceType: 'module'
  },
  plugins: [
    'vue',
    '@typescript-eslint'
  ],
  rules: {
      // è‡ªå®šä¹‰è§„åˆ™
  }
}

```

### ä½¿ç”¨

å¦‚æœæ˜¯åœ¨æœ¬åœ°å¼€å‘

- æˆ‘ä»¬å¯¼å…¥äº†æœªä½¿ç”¨çš„ç»„ä»¶ï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯æç¤º
- ç»Ÿä¸€å˜é‡å®šä¹‰ç­‰

è‡ªå®šä¹‰è§„åˆ™ï¼š

- å‡½æ•°åå’Œæ‹¬å·é—´ä¸æƒ³å¼ºåˆ¶åŠ ç©ºæ ¼

```js
  rules: {
      // è‡ªå®šä¹‰è§„åˆ™
      'space-before-function-paren': 0
  }
```

æ­é…`vscode`æ’ä»¶ï¼š`eslint`ä½¿ç”¨æ›´ä½³

å¦‚æœ`eslint`æœªç”Ÿæ•ˆï¼Œå°±è¦æ£€æŸ¥`vscode`ä¹‹å‰æœ‰æ²¡æœ‰å®‰è£…è¿‡ç±»ä¼¼çš„æ ¼å¼åŒ–å·¥å…·ã€è‡ªåŠ¨ç¾åŒ–çš„ä¸€äº›æ’ä»¶



å¦‚æœæ˜¯åœ¨`linux`è¿œç¨‹å¼€å‘ï¼Œæš‚æ—¶æ²¡åŠæ³•

## å®‰è£…`Saas`




## åˆ›å»ºreacté¡¹ç›®



## åˆ›å»ºå°ç¨‹åºé¡¹ç›®





## `mock`æµç¨‹

### æœ€æ–¹ä¾¿çš„

ä½¿ç”¨`json-server`ï¼Œè§`ajax`çš„æ–‡ç« 

### ç®€å•`mock`

ä»¥`vue`ä¸ºä¾‹ï¼Œ`src`ç›®å½•ä¸‹æ–°å»º`mock`æ–‡ä»¶å¤¹

æ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹ï¼š

```
mock
|----data
|----index.js
```

å®‰è£…`express`ï¼š`npm i express -D`

`data`å¯ä»¥æ”¾ä¸€äº›å‡çš„è¿”å›æ•°æ®ï¼Œä¹‹ååœ¨`index.js`ä¸­å®šä¹‰æ¥å£å¹¶è¿”å›æ•°æ®

`index.js`

```js
const express = require('express')
const app = express()
const url = require('url')
const getdata = require('./data/spider/getdata.json')

app.get('/get-data',(req, res) => {
    res.send(getdata) 
})

app.listen(8081, () => {
    console.log('8081åœ¨è¿è¡Œ')
})
```

ç„¶åä½¿ç”¨`node`è¿è¡Œï¼š`node index.js`

å¦‚æœé…ç½®çš„ç«¯å£æ˜¯å¯ä»¥è®¿é—®å¤–ç½‘çš„è¯ï¼Œè¾“å…¥`ip+æ¥å£è·¯å¾„`ï¼Œå³å¯æ­£å¸¸è¿”å›æ•°æ®ï¼š

![image-20220519141935391](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220519141935391.png)

åœ¨åå°æ¥å£è¿˜æ²¡æœ‰æˆ–ä¸ä¾¿äºè°ƒè¯•æ—¶ï¼Œå¯ä»¥å…ˆç”¨æœ¬åœ°æ•°æ®æ¥å¼€å‘ï¼Œåªè¦è¿”å›çš„æ•°æ®æ ¼å¼ä¸€è‡´å³å¯

### ç¨å¾®å¤æ‚ç‚¹çš„`mock`

`mockjs`åŸºæœ¬ä½¿ç”¨

```
npm i mockjs -D
```

åˆ›å»º`src/mock`æ–‡ä»¶å¤¹ï¼Œæ–°å»ºç›¸åº”çš„`json`æ–‡ä»¶ä»¥åŠå…¥å£æ–‡ä»¶`mockServer.js`

```js
import Mock from 'mockjs'
import banner from './banner.json'

Mock.mock("/mock/banner",{code: 200, message: "0k", data: banner})
```

`main.js`ä¸­å¼•å…¥

```js
import '@/mock/mockServer.js'
```

å¯¹äº`mock`çš„è¯·æ±‚åœ°å€ï¼Œä½¿ç”¨`axios`æ—¶ï¼Œè¦æ–°å»ºä¸ª`axios`å°è£…çš„æ–‡ä»¶ï¼ˆä¹‹å‰çš„æ˜¯`request.js`ï¼Œç°åœ¨å¤åˆ¶ä¸€ä¸‹æ”¹ä¸ªåï¼‰

https://blog.csdn.net/weixin_46670795/article/details/109129987

```js
//ä½¿ç”¨axioså‘é€  ajax
cnpm install axios --save
//ä½¿ç”¨mockjsäº§ç”Ÿéšæœºæ•°æ®
cnpm install mockjs --save-dev
//ä½¿ç”¨json5è§£å†³jsonæ–‡ä»¶,æ— æ³•æ·»åŠ æ³¨é‡Šé—®é¢˜
cnpm install json5 --save-dev

```



## æ–‡ä»¶æœåŠ¡å™¨æ­å»ºæµç¨‹

https://www.jianshu.com/p/2b3b03368249

```bash
npm i express cors multer
```



```js
const express = require('express')
const app = express()
const cors = require('cors')
const multer = require('multer')
const fs = require('fs')
const path = require('path')

// multeræ’ä»¶é…ç½®ï¼š
//æ³¨å†Œä¸€ä¸ªå¯¹è±¡ï¼Œdesté‡Œæ”¾çš„æ˜¯ä¸Šä¼ çš„æ–‡ä»¶å­˜å‚¨çš„ä½ç½®ï¼Œå¯ä»¥åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œå»ºç«‹ä¸€ä¸ªstaticç›®å½•ï¼Œä¸Šä¼ çš„æ–‡ä»¶éƒ½æ”¾åœ¨è¿™é‡Œ
const upload = multer({dest: './static/'})
//ä½¿ç”¨ä¸­é—´ä»¶ï¼Œæ²¡æœ‰æŒ‚è½½è·¯å¾„ï¼Œåº”ç”¨çš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæ‰§è¡Œè¯¥ä¸­é—´ä»¶ã€‚anyè¡¨ç¤ºæ¥å—ä¸€åˆ‡ï¼Œå…·ä½“å‚è€ƒæ–‡æ¡£ã€‚
app.use(upload.any())

// body
app.use(express.json()) // for parsing application/json
app.use(express.urlencoded({ extended: true })) 

// è·¨åŸŸ
app.use(cors())

app.get('/', (req, res) => {
  res.send('ok')
})

app.post('/upload', (req, res) => {
  console.log(req.files)

  //æ‹¿åˆ°åç¼€å
  var extname = path.extname(req.files[0].originalname);

  //æ‹¼æ¥æ–°çš„æ–‡ä»¶è·¯å¾„ï¼Œæ–‡ä»¶åŠ ä¸Šåç¼€å
  var newPath = req.files[0].path + extname;

  //é‡å‘½å
  fs.rename(req.files[0].path, newPath, function(err){
    if(err){
      res.send('ä¸Šä¼ å¤±è´¥')
    }else{
      res.send('ä¸Šä¼ æˆåŠŸ')
    }
  })
})

app.listen(80, () => console.log('server running!'))
```





# CSSè§£å†³æ–¹æ¡ˆ

## ç‚¹å‡»äº‹ä»¶è®°å½•æ ·å¼

- èƒŒæ™¯ï¼Œç°åœ¨æ˜¯hoverçŠ¶æ€ä¸‹ï¼ŒåŠ æ·±èƒŒæ™¯è‰²ï¼Œå¸Œæœ›ç‚¹å‡»æ—¶ï¼Œä¹Ÿèƒ½åŠ æ·±èƒŒæ™¯è‰²ï¼Œä»¥æç¤ºç”¨æˆ·ç›®å‰æ“ä½œçš„æ˜¯å“ªä¸€ä¸ªèœå•æ 

![image-20220318093941394](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220318093941394.png)

- æ€è·¯ï¼š

  - æ•°æ®åŸºäºv-foræ¸²æŸ“ï¼Œå·²ç»å­˜åœ¨ä¸€ä¸ªindexçš„åˆ—è¡¨

  - æ¯æ¬¡ç‚¹å‡»å­˜ä¸€ä¸ªcurrentIndexï¼ŒåŒæ—¶æ ¹æ®indexçš„currentæ˜¯å¦ç›¸ç­‰ï¼ŒåŠ¨æ€ç»‘å®šæ‰€æœ‰itemå­å…ƒç´ çš„æ ·å¼

    - å¯¹äºç‚¹å‡»çš„å…ƒç´ ï¼ŒcurrentIndexå’Œindexè‚¯å®šæ˜¯ç›¸ç­‰çš„
    - ç‚¹å‡»æœªç‚¹å‡»çš„å…ƒç´ ï¼Œä¸¤è€…çš„åˆ¤æ–­è¿”å›ç»“æœå°±æ˜¯false

  - æ ¸å¿ƒä»£ç å¦‚ä¸‹

    ```vue
    <template>
    	<div v-for=""(item, index) in navigations" @click="this.currentIndex=index" :class={'menu-item-click': currentIndex==index}>                                                             
        </div>
                                                                               
    </template>
    <script>
    	export default {
            data() {
                return {
                    currentIndex: 0, // åˆå§‹åŒ–
                }
            }
        }
    </script>
    <style scoped>
        .menu-item.click {
            background-color: grey;
        }
    </style>
    
    ```

    å¯ä»¥é€‚å½“çš„è¿›è¡Œå°è£…

    ```vue
    <template>
    	<div v-for=""(item, index) in navigations" @click="getIndex(index)" :class="bindStyle(index)">                                                           
        </div>                                                                        
    </template>
    <script>
    	export default {
            data() {
                return {
                    currentIndex: 0, // åˆå§‹åŒ–
                }
            },
            methods: {
            	getIndex(index) {
                	this.currentIndex = index
            	},
                bindStyle(index) {
                    return {
                        'menu-item-click': this.currentIndex == index
                    }
                }
            }
        }
    </script>
    <style scoped>
        .menu-item.click {
            background-color: grey;
        }
    </style>
    
    ```

    

## å¸ƒå±€çš„ä¾èµ–æ€§é—®é¢˜

- èƒŒæ™¯ï¼Œå¦‚ä½•é¿å…æ”¹ä¸€ä¸ªåœ°æ–¹çš„æ ·å¼ï¼Œå…¶ä»–åœ°æ–¹çš„æ ·å¼è¿˜è¦è·Ÿç€æ”¹



## `vue-cli`ä¸­å¼•å…¥å…¬å…±æ ·å¼

- å…¬å…±æ ·å¼èµ„æºæ”¾åœ¨`public`ç›®å½•ï¼Œåœ¨`index.html`ä¸­å¼•å…¥

  ```html
  <link rel="stylesheet" href="<%= BASE_URL %>css/bootstrap.css"
  ```

- å…¬å…±èµ„æºæ”¾åœ¨`src`ç›®å½•ï¼Œåœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥

  ```js
  require 'bootstrap.css'
  ```


## è½®æ’­å›¾è§£å†³æ–¹æ¡ˆ

ä½¿ç”¨`swiper.js`

```
  npm i swiper@5 -D
```

`main.js`ä¸­å¼•å…¥

```
import 'swiper/css/swiper.css'
```



https://www.swiper.com.cn/

åœ¨`new swiper`å®ä¾‹ä¹‹å‰ï¼Œé¡µé¢å¿…é¡»è¦æœ‰`dom`ç»“æ„ï¼Œå¤šä»¥è¦`watch`å’Œ`$nextTick`é…åˆä½¿ç”¨

`html`éƒ¨åˆ†

```html
 <!--bannerè½®æ’­-->
        <div class="swiper-container" ref="mySwiper">
          <div class="swiper-wrapper">
            <div class="swiper-slide" v-for="(carousel, index) in bannerList" :key="carousel.id">
              <img :src="carousel.imgUrl"/>
            </div>
          </div>
          <!-- å¦‚æœéœ€è¦åˆ†é¡µå™¨ -->
          <div class="swiper-pagination"></div>

          <!-- å¦‚æœéœ€è¦å¯¼èˆªæŒ‰é’® -->
          <div class="swiper-button-prev"></div>
          <div class="swiper-button-next"></div>
        </div>
```

`js`éƒ¨åˆ†

å¼•å…¥ï¼š

```js
import Swiper from 'swiper'
```



ä½¿ç”¨ï¼š

```js
watch: {
    bannerList: {
      handler(newValue, oldValue) {
        this.$nextTick(() => {
          let mySwiper = new Swiper(this.$refs.mySwiper,{
            loop: true,
            // å¦‚æœéœ€è¦åˆ†é¡µå™¨
            pagination: {
              el: ".swiper-pagination",
              clickable: true // ç‚¹å‡»å°çƒçš„æ—¶å€™ä¹Ÿå¯ä»¥åˆ‡æ¢å›¾ç‰‡
            },
            // å¦‚æœéœ€è¦å‰è¿›åé€€æŒ‰é’®
            navigation: {
              nextEl: ".swiper-button-next",
              prevEl: ".swiper-button-prev"
            }
          })
        })
      }
    }
  }
```



# å¸¸è§UIåº“è§£å†³æ–¹æ¡ˆ

## ElementUI

### el-popover

- å¯ä»¥å•å‘ç»‘å®šç±»åï¼Œæˆ–è€…ç›´æ¥æŒ‡å®šç±»å

# ç½‘ç»œè¯·æ±‚å¸¸è§å¤„ç†

## å–æ¶ˆè¯·æ±‚å‘é€

https://www.jianshu.com/p/22b49e6ad819

åœºæ™¯ï¼šæœç´¢æ—¶ï¼Œä¾‹å¦‚è¾“å…¥abcï¼Œå°½ç®¡åšäº†èŠ‚æµå¤„ç†ï¼Œä½†æ˜¯åœ¨é€€æ ¼åˆ é™¤å…¨éƒ¨æ—¶ï¼Œå¦‚æœå‚æ•°açš„è¿”å›çš„æ•°æ®é‡å¾ˆå¤§ï¼Œå³ä½¿ä¸€å¼€å§‹ç½®ç©ºäº†ï¼Œè¿˜æ˜¯ä¼šå›å¡«å‚æ•°açš„ç»“æœï¼Œæ‰€ä»¥éœ€è¦å¯¹è¾“å…¥é—´éš”çš„æ—¶é—´æˆ³è¿›è¡Œåˆ¤æ–­ï¼Œå°äºæŸä¸ªé˜ˆå€¼æ—¶ï¼Œå–æ¶ˆaxiosè¯·æ±‚



# å¸¸è§å¼‚å¸¸å¤„ç†

## axioså¼‚å¸¸å¤„ç†

- åœºæ™¯ï¼šæ”¯æŒå¤šç«¯ç™»é™†ï¼Œä½†å¤šç«¯ç”¨åˆ°çš„tokenæ˜¯å­˜åœ¨redisçš„ä¸€ä¸ªé”®å€¼é‡Œçš„ï¼ŒæŸä¸€ç«¯æ³¨é”€å¯¼è‡´redisæ¸…æ‰tokenä¹‹åï¼Œå¦ä¸€ç«¯æŠ¥401é”™è¯¯ã€‚- 

  - æˆ‘ä»¬å¯ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼ŒåŠ ä¸Šé”™è¯¯çŠ¶æ€ç çš„å¤„ç†ï¼Œè¿›è¡Œé‡å®šå‘ï¼Œå¦‚ä¸‹ï¼š
  - å¤‡æ³¨ï¼šçŠ¶æ€ç çš„åˆ¤æ–­é€»è¾‘ï¼Œæ˜¯å†™åœ¨onFullfilledé‡Œè¿˜æ˜¯onRejectedé‡Œï¼Œå–å†³äºåå°å’‹å†™çš„ï¼Œæ³¨æ„ä¸‹ã€‚

  ```javascript
      instance.interceptors.response.use(res => {
          return res.data
      }, err => {
          if (err.response) {
              switch (err.response.status) {
                  case 401:
                      store.commit(LOGIN_OUT)
                      window.alert('æ‚¨å·²åœ¨å…¶ä»–åœ°æ–¹ç™»é™†ï¼Œè®¤è¯å¤±æ•ˆ') // å°†ä¼šè¢«é‡å¤è°ƒç”¨
                      window.location.href = '/#/home'
                      
                      break
                  default:
                      break
              }
          }
          console.log(err)
          Promise.reject(error)
      })
  ```

- æ‹“å±•ï¼šæˆ‘ä»¬è¿˜å¸Œæœ›ç»™ç”¨æˆ·ä¸€ä¸ªæç¤º

  - é—®é¢˜ï¼šä¸€ä¸ªé¡µé¢ä¸åªä¸€ä¸ªæ¥å£ä¼šç”¨åˆ°è®¤è¯ï¼Œä¹Ÿå°±æ˜¯è¯´onRejectedçš„å›è°ƒä¼šè¢«å¤šæ¬¡æ•è·åˆ°ï¼Œä¼šå¯¼è‡´å¤šæ¬¡å¼¹çª—

    ![image-20220318150014265](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220318150014265.png)

  - ç›¸ä¼¼åœºæ™¯ï¼š

    - è·å–æ‰€æœ‰çš„el-messageï¼Œåˆ¤æ–­é•¿åº¦ï¼šhttps://blog.csdn.net/qq_36070288/article/details/105553009
    - è‡ªå®šä¹‰å˜é‡ï¼Œåªæ‰§è¡Œç¬¬ä¸€æ¬¡çš„å¼¹çª—ï¼šhttps://blog.csdn.net/m0_46156566/article/details/113976916

  - ç»“æœï¼š**æ²¡è§£å†³**ï¼Œæ‰€æœ‰çš„åˆ¤æ–­å˜é‡åœ¨åˆ·æ–°é¦–é¡µæ—¶ï¼Œåˆè¢«é‡æ–°å®šä¹‰äº†

## å›¾ç‰‡èµ„æºå¼‚å¸¸å¤„ç†

å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/mouday/article/details/107190403

**åˆ©ç”¨onerror äº‹ä»¶å¤„ç†imgæ ‡ç­¾ä¸­çš„srcå›¾ç‰‡åŠ è½½å¤±è´¥**

å¦‚æœ `img`æ ‡ç­¾ä¸­çš„srcå›¾ç‰‡`logo.png`åŠ è½½å¤±è´¥ï¼ŒåŸæ¥çš„å›¾ç‰‡ä½ç½®ä¼šè¢«`error.png` æ›¿æ¢

```html
<img src="logo.png" onerror="handleImageError()" />

<script type="text/javascript">
  function handleImageError() {
    console.log(event);
    var img = event.target;
    img.src = "error.png";
    // æ§åˆ¶å®ƒä¸å¾ªç¯;
    img.onerror = null;
  }
</script>
```

å¦‚æœ`logo.png`ä¸å­˜åœ¨ä¼šè§¦å‘ onerroräº‹ä»¶ï¼ŒæŒ‡å®šå›¾ç‰‡`error.png` å»æ›¿è¡¥ï¼Œ

å¦‚æœæ›¿è¡¥å›¾ç‰‡`error.png` è¿˜ä¸å­˜åœ¨ï¼Œè¿˜ä¼šç»§ç»­è§¦å‘onerroräº‹ä»¶ï¼Œ

éœ€è¦ä½¿ç”¨`img.onerror=null` å–æ¶ˆäº‹ä»¶å¤„ç†

**Vueå¤„ç†æ–¹å¼**

```vue
<template>
  <img v-bind="$attrs"
    v-on="$listeners"
    @error="handleError" />
</template>

<script>
/**
 * æœ‰é”™è¯¯å¤„ç†çš„å›¾ç‰‡
 */
export default {
  name: "MoImage",

  data() {
    return {
      // é»˜è®¤å€¼
      defaultImage: require("@/assets/image/image-default.png"),
    };
  },

  methods: {
    // é”™è¯¯å€¼å¤„ç†
    handleError(event) {
      event.target.src = this.defaultImage;
      // æ§åˆ¶ä¸è¦ä¸€ç›´è·³åŠ¨
      event.target.onerror = null;
    },
  },
};
</script>

```

# äº¤äº’æ–¹æ¡ˆ

æ–°å¢äº¤äº’æ—¶ï¼Œè¦è€ƒè™‘åˆ°

- æ–°å¢å‰ç”¨æˆ·å¯èƒ½åœç•™çš„é¡µé¢æƒ…å†µï¼Œåœ¨æ–°å¢äº¤äº’ç»“æŸåï¼Œè¦èƒ½è¿˜åŸ
- äº¤äº’å‘¨æœŸ
  - äº¤äº’å‰
    - é‡Šæ”¾ä¿¡å·ï¼Œé€šçŸ¥ç”¨æˆ·æ–°çš„äº¤äº’å·²ç»å¼€å§‹
    - æ˜ç¡®æ–°å¢å…ƒç´ 
    - æ˜ç¡®æ–°å¢å…ƒç´ å’Œå·²æœ‰å…ƒç´ çš„ä¾å­˜å…³ç³»
      - äº’æ–¥ï¼š`v-if/v-show`
      - ä¾èµ–ï¼šå®šä½
  - äº¤äº’ä¸­
    - äº¤äº’é¢‘ç‡
      - å•æ¬¡äº¤äº’
      - å¤šæ¬¡äº¤äº’
      - è¿ç»­äº¤äº’
    - è¾“å…¥åé¦ˆ
  - äº¤äº’å
    - äº¤äº’æµ‹è¯•
      - å¤§æ•°æ®é‡æµ‹è¯•
      - äº¤äº’å¾ªç¯æµ‹è¯•
        - å¯ä»¥æœ‰æ•ˆæµ‹å‡ºå“ªäº›ç»“æŸçŠ¶æ€é‡éœ€è¦æ¸…é™¤
    - å¯¹äºæ²¡æœ‰ä¸ç¬¦åˆé¢„æœŸçš„äº¤äº’ï¼Œè¦ç»™å‡ºæç¤º
      - å¦‚æ–°å¢æ“ä½œï¼Œä¸å…è®¸ç”¨æˆ·æ–°å¢åŒç±»å­—æ®µï¼Œè¦ç»™å‡ºæç¤º
  - ç»“æŸ
    - æä¾›ç»“æŸäº¤äº’å…¥å£
      - é€šå¸¸åœ¨é‡Šæ”¾äº¤äº’ä¿¡å·æ—¶ï¼Œå°±è¦è€ƒè™‘äº¤äº’ç»“æŸçš„å…¥å£
    - ç»“æŸäº¤äº’æ—¶ï¼Œè¦è€ƒè™‘æ˜¯å¦è¦æ¸…é™¤å½“å‰çš„çŠ¶æ€é‡
      - å¯¹äºç»“æŸçŠ¶æ€é‡çš„å˜åŒ–ï¼Œè¦è¿›è¡Œä»£ç å¥å£®æ€§è€ƒè™‘
        - å¦‚ï¼šinputè¾“å…¥æ¡†ç»“æŸæ—¶è¿›è¡Œæ¸…ç©ºå€¼çš„æ“ä½œï¼Œwatchæ—¶å¯¹äºoldValueä¸ºç©ºçš„æƒ…å†µï¼Œå°±è¦è¿›è¡Œå¤„ç†

# å¸¸è§ä»£ç é‡æ„æ–¹æ¡ˆ

## æ¡ä»¶åµŒå¥—é‡æ„æ–¹æ¡ˆ

å‚è€ƒé“¾æ¥ï¼šhttps://juejin.cn/post/6844904006154715143

### èƒŒæ™¯

æ—¥å¸¸å¼€å‘ç»å¸¸ä¼šé‡åˆ°å¤æ‚çš„æ¡ä»¶åˆ¤æ–­, ä¸€èˆ¬åšæ³•å°±æ˜¯ç”¨`if`/`else`, æˆ–è€…ä¼˜é›…ä¸€ç‚¹ç”¨`switch`æ¥å®ç°å¤šä¸ªæ¡ä»¶çš„åˆ¤æ–­. å¦‚æœæ¡ä»¶è¶Šæ¥è¶Šå¤š, ä¼šå¯¼è‡´ä»£ç è¶Šæ¥è¶Šè‡ƒè‚¿, å¦‚ä½•ä½¿ç”¨æ›´ä¼˜é›…çš„æ–¹å¼æ¥å®ç°å‘¢?

### åŸºæœ¬ä»£ç -if/elseif/else

```javascript
const clickHandler = (status) => {
  if(status === 1) {
    sendLog('processing')
    jumpTo('IndexPage')
  } else if(status === 2) {
    sendLog('fail')
    jumpTo('FailPage')
  } else if(status === 3) {
    sendLog('fail')
    jumpTo('FailPage')
  } else if(status === 4) {
    sendLog('success')
    jumpTo('SuccessPage')
  } else if(status === 5) {
    sendLog('cancel')
    jumpTo('CancelPage')
  } else {
    sendLog('other')
    jumpTo('Index')
  }
}

```

### ä¼˜åŒ–1-switch

é€šè¿‡ä»¥ä¸Šä»£ç , å¯ä»¥çœ‹å‡ºè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯: æ ¹æ®`status`çŠ¶æ€çš„ä¸åŒ, å‘é€æ—¥å¿—å’Œè·³è½¬åˆ°å¯¹åº”çš„é¡µé¢.

å¤§å®¶å¯ä»¥è½»æ˜“çš„ä½¿ç”¨`switch`æ¥è¿›è¡Œé‡æ„:

```javascript
const clickHandler = (status) => {
    switch (status) {
        case 1:
            sendLog('processing')
            jumpTo('IndexPage')
            break
        case 2:
        case 3:
            sendLog('fail')
            jumpTo('FailPage')
            break
        case 4:
            sendLog('success')
            jumpTo('SuccessPage')
            break
        case 5:
            sendLog('cancel')
            jumpTo('CancelPage')
            break
        default:
            sendLog('other')
            jumpTo('Index')
    }
}

```

è¿™æ ·çœ‹èµ·æ¥æ¯”`if / else`æ¸…æ™°å¤šäº†. ç»†å¿ƒçš„ä½ ä¸€å®šä¼šå‘ç°`case2`, `case3`çš„é€»è¾‘æ˜¯ä¸€æ ·çš„,

### ä¼˜åŒ–2

åœ¨æ—¥å¸¸çš„ä»£ç å¼€å‘ä¸­, åŸºæœ¬ä¸Šå¤§å¤šæ•°åŒå­¦éƒ½æ˜¯è¿™æ ·å†™. è¿™æ ·å†™å›ºç„¶å¯ä»¥, ä½†ä¹Ÿä¸å¤ªä¼˜é›…. æœ‰ä¸€è§‚ç‚¹æ˜¯: **ç¼–ç¨‹çš„æœ¬è´¨, `æ•°æ®ç»“æ„` + `ç®—æ³•`, ä»»ä½•ç®—æ³•éƒ½åŒ…å«ä¸¤éƒ¨åˆ†, `Logic` + `Control`**

- Logicéƒ¨åˆ†å°±æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç®—æ³•
- Controléƒ¨åˆ†åªæ˜¯å½±å“è§£å†³é—®é¢˜çš„æ•ˆç‡.

å¦‚æœæˆ‘ä»¬èƒ½å°† `Logic` å’Œ `Control`éƒ¨åˆ†æœ‰æ•ˆåœ°åˆ†å¼€, é‚£ä¹ˆä»£ç å°†ä¼šå˜å¾—æ›´åŠ å®¹æ˜“ç»´æŠ¤å’Œæ”¹è¿›.

æ¯”å¦‚, æˆ‘ä»¬è¯•ç€ç”¨ä¸‹é¢çš„åŠæ³•å»åˆ†ç¦»ä»£ç :




```javascript
const actions = {
    '1': ['processing', 'IndexPage'],
    '2': ['fail', 'FailPage'],
    '3': ['fail', 'FailPage'],
    '4': ['success', 'SuccessPage'],
    '5': ['cancel', 'CancelPage'],
    'default': ['other', 'Index']
}

const clickHandler = (status) => {
    let action = actions[status] || actions['default'],
        LogName = action[0],
        pageName = action[1]
    sendLog(LogName)
    jumpTo(pageName)
}

```

è¿™æ ·çš„å½¢å¼, å…¶å®å°±æ˜¯`DSL(Domain Specific Language)`è§£æå™¨.

` DSL`çš„æè¿°æ˜¯ä¸€ä¸ªLogic, å‡½æ•°`clickHandler`å°±æ˜¯`Control`éƒ¨åˆ†, ä»£ç å¤§å¤§ç®€åŒ–ã€‚



ç”±æ­¤å¯ä»¥æ€»ç»“å‡ºå¦‚ä¸‹æ€æƒ³:

- State Machine
  - çŠ¶æ€å®šä¹‰
  - çŠ¶æ€å˜è¿æ¡ä»¶
  - çŠ¶æ€çš„action
- DSL - Domain Specific Language
  - HTML,  SQL, æ­£åˆ™è¡¨è¾¾å¼......
- ç¼–ç¨‹èŒƒå¼
  - é¢å‘å¯¹è±¡:  å§”æ‰˜, æ¡¥æ¥, ä¿®é¥°, MVC.......
  - å‡½æ•°å¼ç¼–ç¨‹: ä¿®é¥°, ç®¡é“, æ‹¼æ¥
  - é€»è¾‘æ¨å¯¼å¼ç¼–ç¨‹

// TODO

# æ–‡ä»¶å¯¼å…¥å¯¼å‡º

## HTMLè½¬JSON

```vue
<template>
  <div class="box">
    <input type="file" ref="fileItem">
    <button id="btn" @click="submit">ç¡®å®š</button>
  </div>
</template>

<style scoped>
  body {
    margin: 0;
  }
</style>

<script>
    export default {
        data() {
            return {

            };
        },
        methods: {
            submit() {
                let file = this.$refs.fileItem.files.item(0)
                if (file.name.indexOf(".html") < 0) {
                    // ä¸å¤„ç†éhtmlçš„æ–‡ä»¶ç±»å‹
                    this.alertErr()
                    return
                }
                // è·å–æ–‡ä»¶é‡Œé¢çš„æ–‡æœ¬ä¿¡æ¯
                file.text().then(res => {
                    // å†…å®¹è½¬æˆdomå¯¹è±¡
                    let doms = this.parseToDOM(res);
                    for (const dom of doms) {
                        // ä»domå¯¹è±¡ä¸­è·å–DLæ ‡ç­¾
                        if (dom.tagName == 'DL') {
                            let result = this.textHandle(dom, null);
                            this.exportRaw('data.json', JSON.stringify(result.children))
                        }
                    }
                })
            },
            alertErr() {
                alert("è¯·ä¸è¦ä¸Šä¼ éæµè§ˆå™¨ä¹¦ç­¾æ–‡ä»¶")
            },
            /**
             * æŠŠStringè½¬ä¸ºDOMå¯¹è±¡
             * @param str
             * @returns {NodeListOf<ChildNode>}
             */
            parseToDOM(str) {
                let div = document.createElement("div");
                if (typeof str == "string") {
                    div.innerHTML = str;
                }
                return div.childNodes;
            },
            /**
             *
             * @param dl
             * @param temp
             * @returns {*}
             */
            textHandle(dl, temp) {
                // å…ˆè·å–DL ä¸‹é¢çš„DT
                let dts = this.getDts(dl);
                if (dts.length > 0) {
                    // åˆ¤æ–­DTä¸‹é¢æ˜¯å¦æœ‰DLæ ‡ç­¾
                    for (var i in dts) {
                        let dt = dts[i], hdl = this.getTag(dt, "DL");
                        if (hdl != null) {
                            let h = this.getTag(dt, "H3");
                            let returns = this.textHandle(hdl, {name: h.textContent, children: [], web: []})
                            if (temp == null) {
                                temp = returns;
                            } else {
                                temp.children.push(returns);
                            }
                        } else {
                            var a = this.getTag(dt, "A");
                            temp.web.push({
                                url: a.href,
                                title: a.textContent,
                                desc: a.textContent,
                                logo: a.getAttribute("ICON")
                            })
                        }
                    }
                }
                return temp;
            },
            /**
             * è·å–DLä¸‹é¢çš„DTæ ‡ç­¾
             * @param dl
             * @returns {[]}
             */
            getDts(dl) {
                let dlcs = dl.children, arr = [];
                if (dlcs.length < 1) {
                    return arr;
                }
                for (let dlc of dlcs) {
                    if ((dlc.tagName.toUpperCase()) == 'DT') {
                        arr.push(dlc)
                    }
                }
                return arr;
            },
            /**
             * è·å–dtä¸‹é¢çš„æ ‡ç­¾
             *
             * @param dl
             * @return
             */
            getTag(dt, tagname) {
                let dtcs = dt.children, obj = null;
                if (dtcs.length < 1) {
                    return obj
                }
                for (let dtc of dtcs) {
                    if ((dtc.tagName.toUpperCase()) == tagname) {
                        obj = dtc;
                        break;
                    }
                }
                return obj;
            },
            /**
             * å¯¼å‡ºä¸ºæ–‡ä»¶
             */
            exportRaw(name, data) {
                var urlObject = window.URL || window.webkitURL || window;
                var export_blob = new Blob([data]);
                var save_link = document.createElementNS("http://www.w3.org/1999/xhtml", "a")
                save_link.href = urlObject.createObjectURL(export_blob);
                save_link.download = name;
                var ev = document.createEvent("MouseEvents");
                ev.initMouseEvent("click", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
                save_link.dispatchEvent(ev);
            }

        }
    };
</script>
```

# æ–‡ä»¶ä¸Šä¼ 



# å¯æ‹–æ‹½æ–¹æ¡ˆ

## sortabeljs

http://www.sortablejs.com/index.html

## é¼ æ ‡æ‹–æ‹½è°ƒæ•´divå¤§å°

### JavascriptåŸºæœ¬åŸç†

- æ ¹æ®é¼ æ ‡ä½ç½®æ”¹å˜é¼ æ ‡æ ·å¼
- å½“é¼ æ ‡åœ¨divçš„è¾¹ç¼˜å’Œå››ä¸ªè§’æ—¶æ˜¾ç¤ºä¸åŒçš„æ ·å¼ï¼Œé€šè¿‡cursorä¿®æ”¹
- å½“é¼ æ ‡åœ¨divçš„è¾¹ç¼˜å’Œå››ä¸ªè§’æŒ‰ä¸‹æ—¶è®°å½•å…·ä½“åæ ‡ç‚¹ä½ç½®ï¼Œ å¹¶å¼€å§‹æ ¹æ®é¼ æ ‡çš„ç§»åŠ¨ä¿®æ”¹divçš„å°ºå¯¸
- é¼ æ ‡æ¾å¼€æ—¶ç»“æŸå°ºå¯¸ä¿®æ”¹

![image-20220428110915610](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220428110915610.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <title>Title</title>
 <style>
  body, html {
   width: 100%;
   height: 100%;
   margin: 0;
  }
 
  #container {
   width: 200px;
   height: 200px;
   padding: 15px;
   border: #00cdcd 2px solid;
   box-sizing: border-box;
  }
 
  .item {
   cursor: default;
   width: 100%;
   height: 100%;
   background: #757575;
  }
 </style>
</head>
<body id="body">
<div id="container">
 <div class="item"></div>
</div>
<script>
 //éœ€è¦è°ƒæ•´å°ºå¯¸çš„div
 let c = document.getElementById('container')
 // bodyç›‘å¬ç§»åŠ¨äº‹ä»¶
 document.getElementById('body').addEventListener('mousemove', move)
 // é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
 c.addEventListener('mousedown', down)
 // é¼ æ ‡æ¾å¼€äº‹ä»¶
 document.getElementById('body').addEventListener('mouseup', up)
 
 // æ˜¯å¦å¼€å¯å°ºå¯¸ä¿®æ”¹
 let resizeable = false
 // é¼ æ ‡æŒ‰ä¸‹æ—¶çš„åæ ‡ï¼Œå¹¶åœ¨ä¿®æ”¹å°ºå¯¸æ—¶ä¿å­˜ä¸Šä¸€ä¸ªé¼ æ ‡çš„ä½ç½®
 let clientX, clientY
 // divå¯ä¿®æ”¹çš„æœ€å°å®½é«˜
 let minW = 8, minH = 8
 // é¼ æ ‡æŒ‰ä¸‹æ—¶çš„ä½ç½®ï¼Œä½¿ç”¨nã€sã€wã€eè¡¨ç¤º
 let direc = ''
 
 // é¼ æ ‡æ¾å¼€æ—¶ç»“æŸå°ºå¯¸ä¿®æ”¹
 function up() {
  resizeable = false
 }
 
 // é¼ æ ‡æŒ‰ä¸‹æ—¶å¼€å¯å°ºå¯¸ä¿®æ”¹
 function down(e) {
  let d = getDirection(e)
  // å½“ä½ç½®ä¸ºå››ä¸ªè¾¹å’Œå››ä¸ªè§’æ—¶æ‰å¼€å¯å°ºå¯¸ä¿®æ”¹
  if (d !== '') {
   resizeable = true
   direc = d
   clientX = e.clientX
   clientY = e.clientY
  }
 }
 
 // é¼ æ ‡ç§»åŠ¨äº‹ä»¶
 function move(e) {
  let d = getDirection(e)
  let cursor
  if (d === '') cursor = 'default';
  else cursor = d + '-resize';
  // ä¿®æ”¹é¼ æ ‡æ˜¾ç¤ºæ•ˆæœ
  c.style.cursor = cursor;
  // å½“å¼€å¯å°ºå¯¸ä¿®æ”¹æ—¶ï¼Œé¼ æ ‡ç§»åŠ¨ä¼šä¿®æ”¹divå°ºå¯¸
  if (resizeable) {
   // é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨å³è¾¹ï¼Œä¿®æ”¹å®½åº¦
   if (direc.indexOf('e') !== -1) {
    c.style.width = Math.max(minW, c.offsetWidth + (e.clientX - clientX)) + 'px'
    clientX = e.clientX
   }
 
   // é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨ä¸Šéƒ¨ï¼Œä¿®æ”¹é«˜åº¦
   if (direc.indexOf('n') !== -1) {
    c.style.height = Math.max(minH, c.offsetHeight + (clientY - e.clientY)) + 'px'
    clientY = e.clientY
   }
   // é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨åº•éƒ¨ï¼Œä¿®æ”¹é«˜åº¦
   if (direc.indexOf('s') !== -1) {
    c.style.height = Math.max(minH, c.offsetHeight + (e.clientY - clientY)) + 'px'
    clientY = e.clientY
   }
 
   // é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨å·¦è¾¹ï¼Œä¿®æ”¹å®½åº¦
   if (direc.indexOf('w') !== -1) {
    c.style.width = Math.max(minW, c.offsetWidth + (clientX - e.clientX)) + 'px'
    clientX = e.clientX
   }
 
  }
 }
 
 // è·å–é¼ æ ‡æ‰€åœ¨divçš„ä½ç½®
 function getDirection(ev) {
  let xP, yP, offset, dir;
  dir = '';
 
  xP = ev.offsetX;
  yP = ev.offsetY;
  offset = 10;
 
  if (yP < offset) dir += 'n';
  else if (yP > c.offsetHeight - offset) dir += 's';
  if (xP < offset) dir += 'w';
  else if (xP > c.offsetWidth - offset) dir += 'e';
 
  return dir;
 }
</script>
</body>
</html>
```

### Vueå®ç°

è¿™ä¸ªæ˜¯è‡ªå·±çš„æ€è·¯ï¼Œå¾ˆæ˜æ˜¾æœ‰é—®é¢˜ï¼Œè¯·çœ‹ä¸‹ä¸€èŠ‚

ä¼šæœ‰å¡é¡¿ï¼Œåœ¨`vue`ä¸­è¿˜æ˜¯ç”¨åŸç”Ÿ`js`å®ç°ï¼š

[ vue @mousemoveå®ç°æ‹–åŠ¨ï¼Œé¼ æ ‡ç§»åŠ¨è¿‡å¿«æ‹–åŠ¨å¡é¡¿_æœ¨è£å°é€—æ¯”çš„åšå®¢-CSDNåšå®¢_@mousemove](https://blog.csdn.net/u012699754/article/details/103643421)

å¡é¡¿çš„åŸå› ï¼Œåœ¨äºäº‹ä»¶ç»‘å®šçš„å…ƒç´ æœ‰æ²¡æœ‰å¯¹ä¸Šï¼Œä¸Šè¿°çš„`move`äº‹ä»¶ï¼Œåœ¨`vue`ä¸­çš„å®ç°ï¼Œå¦‚æœèƒ½æ‹¿åˆ°`container`çš„`$event`å°±ä¸ä¼šå‡ºç°å¡é¡¿äº†

å¦‚ä¸‹ä»£ç ï¼Œå‘å³æ‹‰æ—¶ï¼Œä¼šå¡é¡¿ï¼Œå‘å·¦æ‹‰ï¼Œç”±äºäº‹ä»¶å†’æ³¡åˆ°äº†å­å…ƒç´ ï¼Œæ‰€ä»¥å‘å·¦æ‹‰æ˜¯æ­£å¸¸çš„

```vue
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Title</title>
		<style>
			div#body {
				width: 100vw;
				height: 100vh;
				margin: 0;
			}

			#container {
				width: 200px;
				height: 200px;
				padding: 15px;
				border: #00cdcd 2px solid;
				box-sizing: border-box;
			}

			.item {
				cursor: default;
				width: 100%;
				height: 100%;
				background: #757575;
			}
			body {
				margin: 0;
				/* padding: 100px; */
			}
		</style>
	</head>
	<body>
		<div id="app">
			<div id="body" @mouseup="up()"   @mousemove.capture="move($event)" >
				<div id="container" @mousedown.self="down($event)">
					<div class="item"></div>
				</div>
			</div>
		</div>

		<script src="./js/vue.js"></script>
		<script>
			const app = new Vue({
				el: "#app",
				data() {
					return {
						resizeable: false,
						clientX: 0, // é¼ æ ‡åƒç´ ç‚¹åˆ°æµè§ˆå™¨è¾¹ç¼˜çš„è·ç¦»
						clientY: 0,
						minW: 8,
						minH: 8,
						direc: '',
						body: null,
						container: null,
					}
				},
				created() {
					this.$nextTick(() => {
						
					})
				},
				methods: {
					getDirection(ev) {
						let xP, yP, offset, dir;
						dir = '';

						xP = ev.offsetX;
						yP = ev.offsetY;
						offset = 10;

						if (yP < offset) dir += 'n';
						else if (yP > ev.target.offsetHeight - offset) dir += 's';
						if (xP < offset) dir += 'w';
						else if (xP > ev.target.offsetWidth - offset) dir += 'e';
						// console.log('æ–¹å‘ä¸ºï¼š',dir)
						return dir;
					},
					down($event) {
						let d = this.getDirection($event)
						
						// console.log($event.offsetX, $event.offsetY)
						// console.log($event.target.offsetWidth, $event.target.offsetHeight)
						// console.log($event.clientX, $event.clientY)
						// å½“ä½ç½®ä¸ºå››ä¸ªè¾¹å’Œå››ä¸ªè§’æ—¶æ‰å¼€å¯å°ºå¯¸ä¿®æ”¹
						if (d !== '') {
							this.resizeable = true
							this.direc = d
							this.clientX = $event.clientX
							this.clientY = $event.clientY
						}
					},
					up() {
						this.resizeable = false
					},
					move($event) {
						let d = this.getDirection($event)
						console.log(d)
						let cursor
						if (d === '') cursor = 'default';
						else cursor = d + '-resize';
						// ä¿®æ”¹é¼ æ ‡æ˜¾ç¤ºæ•ˆæœ
						$event.target.style.cursor = cursor;
						// å½“å¼€å¯å°ºå¯¸ä¿®æ”¹æ—¶ï¼Œé¼ æ ‡ç§»åŠ¨ä¼šä¿®æ”¹divå°ºå¯¸
						if (this.resizeable) {
							// é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨å³è¾¹ï¼Œä¿®æ”¹å®½åº¦
							if (this.direc.indexOf('e') !== -1) {
								$event.target.style.width = Math.max(this.minW, $event.target.offsetWidth + ($event.clientX - this.clientX)) + 'px'
								this.clientX = $event.clientX
							}

							// é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨ä¸Šéƒ¨ï¼Œä¿®æ”¹é«˜åº¦
							if (this.direc.indexOf('n') !== -1) {
								$event.target.style.height = Math.max(this.minH, $event.target.offsetHeight + (this.clientY - $event.clientY)) + 'px'
								this.clientY = $event.clientY
							}
							// é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨åº•éƒ¨ï¼Œä¿®æ”¹é«˜åº¦
							if (this.direc.indexOf('s') !== -1) {
								$event.target.style.height = Math.max(this.minH, $event.target.offsetHeight + ($event.clientY - this.clientY)) + 'px'
								this.clientY = $event.clientY
							}

							// é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨å·¦è¾¹ï¼Œä¿®æ”¹å®½åº¦
							if (this.direc.indexOf('w') !== -1) {
								$event.target.style.width = Math.max(this.minW, $event.target.offsetWidth + (this.clientX - $event.clientX)) + 'px'
								this.clientX = $event.clientX
							}

						}
					}

				}
			})
		</script>
	</body>
</html>

```

å‘å³æ‹‰ä¼šä¿®æ”¹å¤–å±‚å…ƒç´ çš„widthï¼š

![image-20220428170318441](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/image-20220428170318441.png)

`move`æ–¹æ³•éœ€è¦ç»‘å®šåœ¨å¤–å±‚å…ƒç´ ï¼Œå› ä¸ºè¦ç›‘å¬æ•´ä¸ª`move`è¿‡ç¨‹ï¼Œä½†`event`å¯¹è±¡å¸Œæœ›æ‹¿åˆ°å­å…ƒç´ çš„

å¦‚ä¸‹ï¼š

```javascript
getEvent(e) {
    console.log(e)
    // e.target æ˜¯ä½ å½“å‰ç‚¹å‡»çš„å…ƒç´ 
    // e.currentTarget æ˜¯ä½ ç»‘å®šäº‹ä»¶çš„å…ƒç´ 
	// è¯·æ‰“å¼€æ§åˆ¶å°æ ¸å®ï¼Œçœ‹å“ªä¸ªå±æ€§æœ‰å€¼
    
    // è·å¾—ç‚¹å‡»å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ 
    // e.currentTarget.previousElementSibling.innerHTML

    // è·å¾—ç‚¹å‡»å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ 
    // e.currentTarget.firstElementChild

    // è·å¾—ç‚¹å‡»å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ 
    // e.currentTarget.nextElementSibling

    // è·å¾—ç‚¹å‡»å…ƒç´ ä¸­idä¸ºstringçš„å…ƒç´ 
    // e.currentTarget.getElementById("string")

    // è·å¾—ç‚¹å‡»å…ƒç´ çš„stringå±æ€§
    // e.currentTarget.getAttributeNode('string')

    // è·å¾—ç‚¹å‡»å…ƒç´ çš„çˆ¶çº§å…ƒç´ 
    // e.currentTarget.parentElement

    // è·å¾—ç‚¹å‡»å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ çš„HTMLå€¼
    // e.currentTarget.previousElementSibling.firstElementChild.innerHTML
}

```

è¿™ç§æ–¹æ³•è¡Œä¸é€šï¼Œæ ¹æœ¬è¿˜æ˜¯åœ¨äºäº‹ä»¶å†’æ³¡çš„æœºåˆ¶

### ä¸‰åŒºåŸŸæ‹–åŠ¨

éœ€æ±‚æ•ˆæœï¼š

![img](å‰ç«¯å¸¸è§åœºæ™¯è§£å†³æ–¹æ¡ˆ.assets/1080085-20190612141645469-371607470.gif)

åŸç†ï¼šæ‹–åŠ¨æ•ˆæœçš„å®ç°åŸºæœ¬éƒ½æ˜¯domæ“ä½œæ¥å®ç°çš„ï¼Œé€šè¿‡æ‹–åŠ¨åˆ†éš”çº¿ï¼Œè®¡ç®—åˆ†éš”çº¿ä¸æµè§ˆå™¨è¾¹æ¡†çš„è·ç¦»(left)ï¼Œæ¥å®ç°æ‹–åŠ¨ä¹‹åçš„ä¸åŒå®½åº¦çš„è®¡ç®—ï¼›å½“æ‹–åŠ¨åˆ†éš”çº¿1æ—¶ï¼Œè®¡ç®—å…ƒç´ æ¡†leftå’Œmidï¼›å½“æ‹–åŠ¨åˆ†éš”çº¿2æ—¶ï¼Œè®¡ç®—å…ƒç´ æ¡†midå’Œrightï¼›åŒæ—¶è®¾ç½®å…ƒç´ æ¡†æœ€å°å€¼ä»¥é˜²æ­¢å…ƒç´ æ¡†æ‹–æ²¡äº†ï¼ˆå…¶å®æ˜¯è¢«é®ä½äº†ï¼‰ã€‚ä½¿ç”¨SetCapture() å’Œ ReleaseCapture()çš„å‡½æ•°åŠŸèƒ½æŒ‡å®šçª—å£é‡Œè®¾ç½®é¼ æ ‡æ•è·ã€‚

åœ¨vuejsä¸­ä½¿ç”¨ï¼Œmethodsè®¾ç½®æ–¹æ³•ï¼Œmountedé’©å­æŒ‚è½½ï¼š

htmléƒ¨åˆ†ä»£ç ï¼š

```html
<template>
<div>
  <ul class="box" ref="box">
    <li class="left" ref="left">è¥¿ç“œ</li>
    <li class="resize" ref="resize"></li>
    <li class="mid" ref="mid">å¤‡æ³¨2</li>
    <li class="resize2" ref="resize2"></li>
     <li class="right" ref="right">test</li>
  </ul>
  <ul class="box" ref="box">
    <li class="left" ref="left">èŠ’æœ</li>
    <li class="resize" ref="resize"></li>
    <li class="mid" ref="mid">å¤‡æ³¨</li>
    <li class="resize2" ref="resize2"></li>
    <li class="right" ref="right">test</li>
  </ul>
</div>
</template>
```

jséƒ¨åˆ†ä»£ç ï¼š

```js
<script>
export default {
  mounted () {
    this.dragControllerDiv();
  },
  methods: {
    dragControllerDiv: function () {
      var resize = document.getElementsByClassName('resize');
      var resize2 = document.getElementsByClassName('resize2');
      var left = document.getElementsByClassName('left');
      var right = document.getElementsByClassName('right');
      var mid = document.getElementsByClassName('mid');
      var box = document.getElementsByClassName('box');
      for (let i = 0; i < resize.length; i++) {
        resize[i].onmousedown = function (e) {
          var startX = e.clientX;
          resize[i].left = resize[i].offsetLeft;
          document.onmousemove = function (e) {
            var endX = e.clientX;
            var rightW = right[i].offsetWidth;
            var moveLen = resize[i].left + (endX - startX);
            var maxT = box[i].clientWidth - resize[i].offsetWidth;
            if (moveLen < 150) moveLen = 150; 
            if (moveLen > maxT - rightW - 150) moveLen = maxT - rightW - 150;

            resize[i].style.left = moveLen;

            for (let j = 0; j < left.length; j++) {
              left[j].style.width = moveLen + 'px';
              mid[j].style.width = (box[i].clientWidth - moveLen - rightW - 10) + 'px';
            }
          }
          document.onmouseup = function (evt) {
            document.onmousemove = null;
            document.onmouseup = null; 
            resize[i].releaseCapture && resize[i].releaseCapture();
          }
          resize[i].setCapture && resize[i].setCapture();
          return false;
        }
      }
      for (let i = 0; i < resize2.length; i++) {
        resize2[i].onmousedown = function (e) {
          var startX = e.clientX;
          resize2[i].left = resize2[i].offsetLeft;
          document.onmousemove = function (e) {
            var endX = e.clientX;
            var leftW = left[i].offsetWidth;
            var moveLen = resize2[i].left + (endX - startX) - leftW;
            var maxT = box[i].clientWidth - resize2[i].offsetWidth - 5;
            if (moveLen < 150) moveLen = 150; 
            if (moveLen > maxT - leftW - 150) moveLen = maxT - leftW - 150;

            resize2[i].style.left = moveLen;
            for (let j = 0; j < right.length; j++) {
              mid[j].style.width = moveLen + 'px';
              right[j].style.width = (box[i].clientWidth - moveLen - leftW - 10) + 'px';
            }
          }
          document.onmouseup = function (evt) {
            document.onmousemove = null;
            document.onmouseup = null; 
            resize2[i].releaseCapture && resize2[i].releaseCapture();
          }
          resize2[i].setCapture && resize2[i].setCapture();
          return false;
        }
      }
    }
  }
}
</script>
```

styleéƒ¨åˆ†ï¼š

```css
<style scoped>
ul,li{
  list-style: none;
  display: block;
  margin:0;
  padding:0;
}
.box{
  width:800px;
  height:32px;
  overflow:hidden;
}
.left{
  width:calc(30% - 10px);
  height:100%;  
  background:skyblue;
  float:left;
}

.resize{
  width:5px;
  height:100%;
  cursor: w-resize;
  float:left;
}

.resize2{
  width:5px;
  height:100%;
  cursor: w-resize;
  float:left;
}

.right{
  float:left;
  width:35%;
  height:100%;  
  background:tomato;
}
.mid{
  float:left;
  width:35%;
  height:100%;  
  background:#f00;
}
</style>
```



ç›¸å…³é“¾æ¥ï¼š

[vueé¡¹ç›®æ‹–åŠ¨å®ç°ä¿®æ”¹å·¦å³å®½åº¦ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000023324536)

### åŒåŒºåŸŸæ‹–åŠ¨

```vue
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style scoped>
			ul,
			li {
				list-style: none;
				display: block;
				margin: 0;
				padding: 0;
			}

			.box {
				width: 100%;
				height: 32px;
				overflow: hidden;
			}

			.left {
				width: calc(30% - 5px);
				height: 100%;
				background: skyblue;
				float: left;
			}

			.resize {
				width: 5px;
				height: 100%;
				cursor: w-resize;
				float: left;
			}

			.right {
				float: left;
				width: 1%;
				height: 100%;
				background: tomato;
			}

			.mid {
				float: left;
				width: 70%;
				height: 100%;
				background: #f00;
			}
		</style>
	</head>
	<body>
		<div id="app">

			<ul class="box" ref="box">
				<li class="left" ref="left">è¥¿ç“œ</li>
				<li class="resize" ref="resize"></li>
				<li class="mid" ref="mid">å¤‡æ³¨2</li>

			</ul>

		</div>

		<script src="./js/vue.js"></script>
		<script>
			new Vue({
				el: "#app",
				mounted() {
					this.dragControllerDiv();
				},
				methods: {
					dragControllerDiv: function() {
						var resize = document.getElementsByClassName('resize');
						var left = document.getElementsByClassName('left');
						var mid = document.getElementsByClassName('mid');
						var box = document.getElementsByClassName('box');
						for (let i = 0; i < resize.length; i++) {
							resize[i].onmousedown = function(e) {
								var startX = e.clientX; // è·å–åˆ†éš”çº¿ï¼Œè·ç¦»æµè§ˆå™¨å·¦è¾¹çš„è·ç¦»
								resize[i].left = resize[i].offsetLeft; // 
								console.log(resize[i].offsetLeft)
								document.onmousemove = function(e) {
									var endX = e.clientX;
									var moveLen = resize[i].left + (endX - startX);
									var maxT = box[i].clientWidth - resize[i].offsetWidth - 500;
									if (moveLen < 150) moveLen = 150;
									if (moveLen > maxT - 150) moveLen = maxT  - 150;

									resize[i].style.left = moveLen;

									for (let j = 0; j < left.length; j++) {
										left[j].style.width = moveLen + 'px';
										mid[j].style.width = (box[i].clientWidth - moveLen -  10) + 'px';
									}
								}
								document.onmouseup = function(evt) {
									document.onmousemove = null;
									document.onmouseup = null;
									resize[i].releaseCapture && resize[i].releaseCapture();
								}
								resize[i].setCapture && resize[i].setCapture();
								return false;
							}
						}
						
					}
				}
			})
		</script>
	</body>
</html>

```

# å†å²è®°å½•æ–¹æ¡ˆ

ä¹‹å‰å†™è¿‡ä¸€éäº†ï¼ŒåŒæ­¥çš„æ—¶å€™æ²¡æ³¨æ„ä¸¢æ‰äº†

## å¯¼èˆªå†å²è®°å½•

å°†`localStorage`çš„è¯»å–ï¼Œç»“åˆ`vuex`ï¼Œåˆ©ç”¨æ•°æ®ä»£ç†å°è£…æˆå“åº”å¼

ä½¿ç”¨`v-if/v-else`æ¥è®¾è®¡å¥½`å†å²è®°å½•`å’Œ`æœé›†ç»“æœ`ä¹‹é—´çš„ç»“æ„ï¼Œå¹¶å¤„ç†å¥½çŠ¶æ€å˜æ›´çš„äº¤äº’

æ·»åŠ å­˜å‚¨å†å²è®°å½•çš„é€»è¾‘ï¼Œå¹¶æ§åˆ¶å¥½å­˜å‚¨æ•°é‡ã€å»é‡æ“ä½œã€æ–°æµè§ˆçš„è®°å½•æ›´æ–°è‡³ç¬¬ä¸€ä½ï¼Œæœ€åæäº¤å°†åºåˆ—åŒ–å¥½çš„æ•°æ®æ ¼å¼æäº¤`mutations`

- å­˜å‚¨
  - æœç´¢è®°å½•çš„ç»“æœï¼Œç‚¹å‡»æ—¶éœ€è¦å­˜å‚¨
  - æ™®é€šæµè§ˆæ—¶ï¼Œç‚¹å‡»æ—¶éœ€è¦å­˜å‚¨

- æ–°æµè§ˆçš„è®°å½•æ›´æ–°è‡³ç¬¬ä¸€ä½

  - å½“`localStorage`çš„å€¼çš„æ•°æ®ç»“æ„æ•°ç»„å†…å¥—å¯¹è±¡æ—¶ä¸º

    ```
    [
    	{},
    	{},
    	{}
    ]
    
    ```

    åˆ¤æ–­ç›¸ç­‰çš„é€»è¾‘ï¼Œä¸èƒ½ç›´æ¥å–æ•°ç»„æ•°æ®ä¸­çš„å¯¹è±¡å’ŒåŸå¯¹è±¡æ¯”è¾ƒï¼ˆå¾ˆæ˜æ˜¾è¿™ä¸¤ä¸ªä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œéœ€è¦å–ä¸¤ä¸ªå¯¹è±¡å†…éƒ¨çš„æ ‡è¯†ï¼Œå¦‚`id`ï¼Œä¸”ä¸èƒ½ä½¿ç”¨å…¨ç­‰`===`ï¼Œä½¿ç”¨`==`å³å¯

- å»é‡æ“ä½œ

  ç”±äºæ•°æ®ç»“æ„çš„é—®é¢˜ï¼Œæ“ä½œçš„æ˜¯å¯¹è±¡ï¼Œæ­£å¸¸é¡µé¢å’Œæœç´¢ç»“æœé¡µé¢ï¼Œå¦‚æœç‚¹å‡»çš„æ˜¯åŒä¸€ä¸ªï¼Œåº•å±‚ä¸Šæ—¶ä¸åŒçš„å¯¹è±¡ï¼Œä»éœ€è¦æ ¹æ®`id`æ¥å¤„ç†
  
  ```js
  
  let arr = [
      {id:1,name:'sai'},
      {id:2,name:'hikaru'},
      {id:3,name:'akira'},
  ]
  
  let id = 4 // å…¥å‚
  let filterNum = 0
  for(let value of arr) {
      if(id !== value.id) {
          filterNum++
      }
  }
  // ä¹Ÿå¯ä»¥ç”¨forEach
  // arr.forEach(item => {
  //     if(item.id !== id) {
  //         filterNum++
  //     }
  // })
  
  if(filterNum == arr.length) {
      console.log('æ‰§è¡Œä¿å­˜æ“ä½œ')
  } else {
      console.log('å·²ç»æœ‰å€¼äº†ï¼Œå•¥ä¹Ÿä¸åš')
  }
  ```
  
  

å¼‚å¸¸ç»“æœçš„è€ƒè™‘

æœªæœåˆ°ç»“æœçš„æç¤ºï¼Œä¸åº”è¯¥è¢«è®°å½•ä¸‹æ¥

æ·»åŠ åˆ é™¤å†å²è®°å½•`UI`ç•Œé¢åŠé€»è¾‘





